dependencies:
  - { role: create_certs/init, when: "inventory_hostname in (groups['masters'] + groups['add_masters'] + groups['nodes'] + groups['add_nodes'])" }

  - { role: create_certs/openssl, certs: "{{ openssl_master_certs }}", when: "(binary_way is defined and binary_way.enable and binary_way.openssl_cert and inventory_hostname == groups['masters'][0]) or (kubeadm_way is defined and kubeadm_way.enable and not kubeadm_way.kubeadm_cert and inventory_hostname == groups['masters'][0])" }
  - { role: create_certs/openssl, certs: "{{ openssl_worker_certs }}", when: "(binary_way is defined and binary_way.enable and binary_way.openssl_cert and inventory_hostname in (groups['masters'] + groups['add_masters'] + groups['nodes'] + groups['add_nodes'])) or (kubeadm_way is defined and kubeadm_way.enable and not kubeadm_way.kubeadm_cert and inventory_hostname in (groups['masters'] + groups['add_masters'] + groups['nodes'] + groups['add_nodes']))" }

  - { role: create_certs/cfssl, certs: "{{ cfssl_master_certs }}", when: "binary_way is defined and binary_way.enable and binary_way.cfssl_cert and inventory_hostname == groups['masters'][0]" }
  - { role: create_certs/cfssl, certs: "{{ cfssl_worker_certs }}", when: "binary_way is defined and binary_way.enable and binary_way.cfssl_cert and inventory_hostname in (groups['masters'] + groups['add_masters'] + groups['nodes'] + groups['add_nodes'])" }
